#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
#%Header } 0/+/WU9nlN6gOxSaFqE2Cw
#%Header {
##############################################################################
#
# File data-adanaxis/spaces/river1/space.rb
#
# Copyright Andy Southgate 2006-2007
#
# This file may be used and distributed under the terms of the Mushware
# Software Licence version 1.4, under the terms for 'Proprietary original
# source files'.  If not supplied with this software, a copy of the licence
# can be obtained from Mushware Limited via http://www.mushware.com/.
# One of your options under that licence is to use and distribute this file
# under the terms of the GNU General Public Licence version 2.
#
# This software carries NO WARRANTY of any kind.
#
##############################################################################
# $Id: space.rb,v 1.20 2007/07/03 13:56:36 southa Exp $
# $Log: space.rb,v $
# Revision 1.20  2007/07/03 13:56:36  southa
# Generic dpkg release
#
# Revision 1.19  2007/07/03 13:30:13  southa
# Generic dpkg release
#
# Revision 1.18  2007/06/29 14:41:49  southa
# Mandriva release
#
# Revision 1.17  2007/06/29 12:05:00  southa
# Mandriva packaging
#
# Revision 1.16  2007/06/28 15:15:13  southa
# Mandriva fixes
#
# Revision 1.15  2007/06/28 14:04:58  southa
# Mandriva packaging
#
# Revision 1.14  2007/06/27 21:42:35  southa
# X11 release
#
# Revision 1.13  2007/06/27 19:54:15  southa
# X11 release
#
# Revision 1.12  2007/06/27 15:30:41  southa
# X11 packaging
#
# Revision 1.11  2007/06/27 13:38:28  southa
# Debian packaging
#
# Revision 1.10  2007/06/27 13:19:00  southa
# Debian packaging
#
# Revision 1.9  2007/06/27 12:58:21  southa
# Debian packaging
#
# Revision 1.8  2007/04/18 09:21:57  southa
# Header and level fixes
#
# Revision 1.7  2007/03/31 06:04:44  southa
# Header fix
#
# Revision 1.6  2007/03/13 21:45:10  southa
# Release process
#
# Revision 1.5  2007/02/08 17:55:13  southa
# Common routines in space generation
#
# Revision 1.4  2006/10/06 14:48:18  southa
# Material animation
#
# Revision 1.3  2006/10/03 14:06:50  southa
# Khazi and projectile creation
#
# Revision 1.2  2006/08/02 15:41:46  southa
# Prerelease work
#
# Revision 1.1  2006/08/01 17:21:20  southa
# River demo
#
# Revision 1.16  2006/08/01 13:41:14  southa
# Pre-release updates
#

require 'Mushware.rb'
require 'Adanaxis.rb'

class Adanaxis_river1 < AdanaxisSpace
  def initialize(inParams = {})
    super
    @preCached = 0
  end

  def mLoad(game)
    mLoadStandard(game)
    MushGame.cSoundStreamDefine('theme1', MushConfig.cGlobalWavesPath+'/mushware-adanaxistheme.ogg')
    @preCached = 0
  end

  def mPrecache
    num = @preCached
    # Must still increment @preCached if cPrecache throws
    @preCached += 1
    case (num)
      when 9   : MushGLTexture.cPrecache("river1-tex")
      when 19 : MushGLTexture.cPrecache("ground1-tex")
    end

    3 * num
  end

  def mInitialPiecesCreate
    super

    # Create the river and ground
    5.times do |x|
      y=-3
      5.times do |z|
        5.times do |w|
          if (w == 2 && z == 2)
            meshName = 'river1'
          else
            meshName = 'ground1'
          end
          AdanaxisPieceKhazi.cCreate(
            :mesh_name => meshName,
            :post => MushPost.new(
              :position => MushVector.new(x-2, y-2, z-2, w-30)
            )
          )
        end
      end
    end

    1000.times do |i|
      pos = MushTools.cRandomUnitVector * (30 + rand(100))
      world = AdanaxisWorld.new(
        :mesh_name => "star#{i % 10}",
        :post => MushPost.new(
          :position => pos
          )
        )
    end

  end
end
